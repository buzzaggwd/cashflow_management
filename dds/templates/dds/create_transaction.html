{% extends "base.html" %}

{% block content %}
<div class="container mt-4">
  <!-- Кнопка "Назад" -->
  <div class="text-left mb-4">
    <a href="/" class="btn btn-outline-primary">← Назад</a>
  </div>

  <!-- Карточка формы создания транзакции -->
  <div class="card shadow-sm">
    <div class="card-header">
      <h4 class="mb-0">Создать транзакцию</h4>
    </div>
    <div class="card-body">
      <form id="transaction-form">
        <div class="row g-3">

          <!-- Дата операции -->
          <div class="col-md-4">
            <label class="form-label">Дата</label>
            <input type="date"
                class="form-control form-control-sm"
                name="date"
                value="{% if transaction and transaction.date %}{{ transaction.date|date:'Y-m-d' }}{% endif %}">
            <small class="text-muted">Для текущей даты оставьте поле пустым</small>
          </div>

          <!-- Статус -->
          <div class="col-md-4">
            <label class="form-label">Статус</label>
            <select class="form-select form-select-sm" name="status" id="status-select"></select>
          </div>

          <!-- Тип -->
          <div class="col-md-4">
            <label class="form-label">Тип</label>
            <select class="form-select form-select-sm" name="type" id="type-select">
              <option value="">Выберите тип</option>
            </select>
          </div>

          <!-- Категория -->
          <div class="col-md-6">
            <label class="form-label">Категория</label>
            <select class="form-select form-select-sm" name="category" id="category-select" onchange="loadSubcategories(this.value)">
              <option value="">Выберите категорию</option>
            </select>
          </div>

          <!-- Подкатегория -->
          <div class="col-md-6">
            <label class="form-label">Подкатегория</label>
            <select class="form-select form-select-sm" name="subcategory" id="subcategory-select"></select>
          </div>

          <!-- Сумма в рублях -->
          <div class="col-md-4">
            <label class="form-label">Сумма (₽)</label>
            <input type="number" step="0.01" min="0" class="form-control form-control-sm" name="amount" required>
          </div>

          <!-- Комментарий -->
          <div class="col-12">
            <label class="form-label">Комментарий</label>
            <textarea class="form-control form-control-sm" name="comment" rows="2"></textarea>
          </div>
        </div>

        <!-- Кнопка сохранения -->
        <div class="mt-4 text-end">
          <button type="submit" class="btn btn-outline-success">
            <i class="bi bi-check-lg"></i> Сохранить
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
{% endblock %}
